{% from 'components/stats_card.html' import dashboard_stats_row %}

<!-- Dashboard Section -->
<div id="dashboard-section" class="content-section">
    <!-- Modern Dashboard Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="dashboard-header">
                <div class="dashboard-title-section">
                    <div class="dashboard-icon">
                        <i class="bi bi-speedometer2"></i>
                    </div>
                    <div class="dashboard-title-content">
                        <h1 class="dashboard-title">Dashboard <span class="title-accent">Professionale</span></h1>
                        <p class="dashboard-subtitle">Panoramica completa delle performance SEO dei tuoi clienti</p>
                        <div class="dashboard-stats-mini">
                            <span class="mini-stat">
                                <i class="bi bi-lightning-charge"></i> 
                                <span id="mini-active-scans">0</span> scansioni attive
                            </span>
                            <span class="mini-stat">
                                <i class="bi bi-clock"></i> 
                                Ultimo update: <span id="mini-last-update">ora</span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    {{ dashboard_stats_row() }}

    <!-- Main Dashboard Content -->
    <div class="row">
        <!-- Recent Scans & Performance -->
        <div class="col-lg-8">
            <!-- Modern Recent Scans -->
            <div class="modern-dashboard-card recent-scans-card slide-in-right">
                <div class="card-header-modern">
                    <div class="card-header-content">
                        <div class="card-icon">
                            <i class="bi bi-activity"></i>
                        </div>
                        <div class="card-title-section">
                            <h5 class="card-title-modern">Scansioni Recenti</h5>
                            <p class="card-subtitle-modern">Monitora l'attivit√† di scansione in tempo reale</p>
                        </div>
                    </div>
                    <div class="card-actions">
                        <a href="#" onclick="app.showSection('scans')" class="btn btn-modern-outline">
                            Vedi tutte <i class="bi bi-arrow-right"></i>
                        </a>
                    </div>
                </div>
                <div class="card-body-modern">
                    <div id="recent-scans-list" class="scans-list-modern">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Modern SEO Health Overview -->
            <div class="modern-dashboard-card health-overview-card slide-in-right">
                <div class="card-header-modern">
                    <div class="card-header-content">
                        <div class="card-icon health-icon">
                            <i class="bi bi-graph-up"></i>
                        </div>
                        <div class="card-title-section">
                            <h5 class="card-title-modern">Stato SEO <span class="title-accent">Complessivo</span></h5>
                            <p class="card-subtitle-modern">Analisi delle performance aggregate di tutti i siti</p>
                        </div>
                    </div>
                    <div class="health-score-preview">
                        <div class="score-indicator">
                            <span class="score-value" id="overall-score">--</span>
                            <span class="score-label">Score</span>
                        </div>
                    </div>
                </div>
                <div class="card-body-modern">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="chart-container">
                                <canvas id="dashboardHealthChart" width="300" height="200"></canvas>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div id="health-insights" class="health-insights-modern">
                                <!-- Populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sidebar: Quick Actions & Alerts -->
        <div class="col-lg-4">
            <!-- Modern Quick Actions -->
            <div class="modern-dashboard-card quick-actions-card slide-in-right">
                <div class="card-header-modern">
                    <div class="card-header-content">
                        <div class="card-icon lightning-icon">
                            <i class="bi bi-lightning"></i>
                        </div>
                        <div class="card-title-section">
                            <h5 class="card-title-modern">Azioni <span class="title-accent">Rapide</span></h5>
                            <p class="card-subtitle-modern">Operazioni frequenti a portata di click</p>
                        </div>
                    </div>
                </div>
                <div class="card-body-modern">
                    <div class="actions-grid">
                        <button class="action-btn client-action" onclick="app.showAddClientModal()">
                            <div class="action-icon">
                                <i class="bi bi-person-plus"></i>
                            </div>
                            <div class="action-content">
                                <span class="action-title">Nuovo Cliente</span>
                                <span class="action-desc">Aggiungi cliente</span>
                            </div>
                        </button>
                        <button class="action-btn website-action" onclick="app.showAddWebsiteModal()">
                            <div class="action-icon">
                                <i class="bi bi-globe-europe-africa"></i>
                            </div>
                            <div class="action-content">
                                <span class="action-title">Nuovo Sito</span>
                                <span class="action-desc">Aggiungi sito web</span>
                            </div>
                        </button>
                        <button class="action-btn scan-action" onclick="app.showNewScanModal()">
                            <div class="action-icon">
                                <i class="bi bi-play-circle"></i>
                            </div>
                            <div class="action-content">
                                <span class="action-title">Avvia Scan</span>
                                <span class="action-desc">Nuova scansione</span>
                            </div>
                        </button>
                        <button class="action-btn report-action" onclick="app.viewAllReports()">
                            <div class="action-icon">
                                <i class="bi bi-file-earmark-text"></i>
                            </div>
                            <div class="action-content">
                                <span class="action-title">Report</span>
                                <span class="action-desc">Tutti i report</span>
                            </div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Modern Critical Alerts -->
            <div class="modern-dashboard-card alerts-card slide-in-right">
                <div class="card-header-modern danger-header">
                    <div class="card-header-content">
                        <div class="card-icon alert-icon">
                            <i class="bi bi-exclamation-triangle"></i>
                        </div>
                        <div class="card-title-section">
                            <h5 class="card-title-modern">Alert <span class="title-accent danger">Critici</span></h5>
                            <p class="card-subtitle-modern">Problemi che richiedono attenzione immediata</p>
                        </div>
                    </div>
                    <div class="alert-counter">
                        <span class="counter-value" id="alert-counter">0</span>
                    </div>
                </div>
                <div class="card-body-modern">
                    <div id="critical-alerts" class="alerts-list-modern">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>