<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEOAudit - Dashboard Professionale | Nova Tools</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Header Top Bar -->
    <div class="header-top">
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <div class="header-info">
                        <span class="badge bg-success pulse-animation">
                            <i class="bi bi-circle-fill"></i> Sistema Attivo
                        </span>
                        <span class="text-muted ms-3">
                            <i class="bi bi-clock"></i> Ultimo aggiornamento: <span id="last-update">In tempo reale</span>
                        </span>
                    </div>
                </div>
                <div class="col-md-6 text-end">
                    <div class="header-actions">
                        <button class="btn btn-outline-light btn-sm me-2" onclick="app.refreshData()">
                            <i class="bi bi-arrow-clockwise"></i> Aggiorna
                        </button>
                        <div class="dropdown d-inline-block">
                            <button class="btn btn-light btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                <i class="bi bi-person-circle"></i> Admin
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li><a class="dropdown-item" href="#"><i class="bi bi-gear"></i> Impostazioni</a></li>
                                <li><a class="dropdown-item" href="#"><i class="bi bi-question-circle"></i> Aiuto</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="#"><i class="bi bi-box-arrow-right"></i> Logout</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Navigation Header -->
    <header class="main-header">
        <div class="container-fluid">
            <div class="row align-items-center">
                <!-- Logo e Brand -->
                <div class="col-lg-3 col-md-4">
                    <div class="brand-section">
                        <div class="logo-container">
                            <div class="logo-icon">
                                <i class="bi bi-graph-up-arrow"></i>
                            </div>
                            <div class="brand-text">
                                <h1 class="brand-title">SEO<span class="brand-accent">Audit</span></h1>
                                <p class="brand-subtitle">Nova Tools</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Navigation Menu -->
                <div class="col-lg-6 col-md-5">
                    <nav class="main-nav">
                        <ul class="nav-menu">
                            <li class="nav-item">
                                <a href="#" class="nav-link active" data-section="dashboard">
                                    <div class="nav-icon">
                                        <i class="bi bi-speedometer2"></i>
                                    </div>
                                    <span>Dashboard</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link" data-section="clients">
                                    <div class="nav-icon">
                                        <i class="bi bi-people"></i>
                                    </div>
                                    <span>Clienti</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link" data-section="websites">
                                    <div class="nav-icon">
                                        <i class="bi bi-globe"></i>
                                    </div>
                                    <span>Siti Web</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link" data-section="scans">
                                    <div class="nav-icon">
                                        <i class="bi bi-search"></i>
                                    </div>
                                    <span>Scansioni</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link" data-section="scheduler">
                                    <div class="nav-icon">
                                        <i class="bi bi-clock-history"></i>
                                    </div>
                                    <span>Scheduler</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>

                <!-- Action Buttons -->
                <div class="col-lg-3 col-md-3">
                    <div class="header-cta">
                        <button class="btn btn-gradient btn-lg" onclick="app.showNewScanModal()">
                            <i class="bi bi-rocket-takeoff"></i>
                            <span class="btn-text">Nuova Scansione</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Navigation Toggle -->
    <div class="mobile-nav-toggle d-lg-none">
        <button class="btn btn-primary w-100" type="button" data-bs-toggle="collapse" data-bs-target="#mobileNav">
            <i class="bi bi-list"></i> Menu Navigazione
        </button>
        <div class="collapse" id="mobileNav">
            <div class="mobile-nav-menu">
                <a href="#" class="mobile-nav-link active" data-section="dashboard">
                    <i class="bi bi-speedometer2"></i> Dashboard
                </a>
                <a href="#" class="mobile-nav-link" data-section="clients">
                    <i class="bi bi-people"></i> Clienti
                </a>
                <a href="#" class="mobile-nav-link" data-section="websites">
                    <i class="bi bi-globe"></i> Siti Web
                </a>
                <a href="#" class="mobile-nav-link" data-section="scans">
                    <i class="bi bi-search"></i> Scansioni
                </a>
                <a href="#" class="mobile-nav-link" data-section="scheduler">
                    <i class="bi bi-clock-history"></i> Scheduler
                </a>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container-fluid mt-4">
        <!-- Dashboard Section -->
        <div id="dashboard-section" class="content-section">
            <!-- Modern Dashboard Header -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="dashboard-header">
                        <div class="dashboard-title-section">
                            <div class="dashboard-icon">
                                <i class="bi bi-speedometer2"></i>
                            </div>
                            <div class="dashboard-title-content">
                                <h1 class="dashboard-title">Dashboard <span class="title-accent">Professionale</span></h1>
                                <p class="dashboard-subtitle">Panoramica completa delle performance SEO dei tuoi clienti</p>
                                <div class="dashboard-stats-mini">
                                    <span class="mini-stat">
                                        <i class="bi bi-lightning-charge"></i> 
                                        <span id="mini-active-scans">0</span> scansioni attive
                                    </span>
                                    <span class="mini-stat">
                                        <i class="bi bi-clock"></i> 
                                        Ultimo update: <span id="mini-last-update">ora</span>
                                    </span>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            
            <!-- Modern Stats Cards Row -->
            <div class="row mb-4 dashboard-stats-row">
                <div class="col-lg-3 col-md-6 mb-3">
                    <div class="modern-stats-card clients-card fade-in">
                        <div class="stats-card-bg"></div>
                        <div class="stats-card-content">
                            <div class="stats-icon-container">
                                <div class="stats-icon clients-icon">
                                    <i class="bi bi-people"></i>
                                </div>
                            </div>
                            <div class="stats-data">
                                <div class="stats-label">Clienti Attivi</div>
                                <div class="stats-number" id="total-clients">0</div>
                                <div class="stats-trend positive">
                                    <i class="bi bi-trending-up"></i>
                                    <span id="clients-growth">+0</span> questo mese
                                </div>
                            </div>
                        </div>
                        <div class="stats-card-shine"></div>
                    </div>
                </div>

                <div class="col-lg-3 col-md-6 mb-3">
                    <div class="modern-stats-card websites-card fade-in">
                        <div class="stats-card-bg"></div>
                        <div class="stats-card-content">
                            <div class="stats-icon-container">
                                <div class="stats-icon websites-icon">
                                    <i class="bi bi-globe"></i>
                                </div>
                            </div>
                            <div class="stats-data">
                                <div class="stats-label">Siti Monitorati</div>
                                <div class="stats-number" id="total-websites">0</div>
                                <div class="stats-trend info">
                                    <i class="bi bi-activity"></i>
                                    <span id="active-websites">0</span> attivi
                                </div>
                            </div>
                        </div>
                        <div class="stats-card-shine"></div>
                    </div>
                </div>

                <div class="col-lg-3 col-md-6 mb-3">
                    <div class="modern-stats-card scans-card fade-in">
                        <div class="stats-card-bg"></div>
                        <div class="stats-card-content">
                            <div class="stats-icon-container">
                                <div class="stats-icon scans-icon">
                                    <i class="bi bi-search"></i>
                                </div>
                            </div>
                            <div class="stats-data">
                                <div class="stats-label">Scansioni Complete</div>
                                <div class="stats-number" id="total-scans">0</div>
                                <div class="stats-trend neutral">
                                    <i class="bi bi-clock"></i>
                                    <span id="last-scan-time">mai</span>
                                </div>
                            </div>
                        </div>
                        <div class="stats-card-shine"></div>
                    </div>
                </div>

                <div class="col-lg-3 col-md-6 mb-3">
                    <div class="modern-stats-card issues-card fade-in">
                        <div class="stats-card-bg"></div>
                        <div class="stats-card-content">
                            <div class="stats-icon-container">
                                <div class="stats-icon issues-icon">
                                    <i class="bi bi-exclamation-triangle"></i>
                                </div>
                            </div>
                            <div class="stats-data">
                                <div class="stats-label">Problemi Critici</div>
                                <div class="stats-number" id="critical-issues-total">0</div>
                                <div class="stats-trend warning">
                                    <i class="bi bi-exclamation-triangle"></i>
                                    Richiedono attenzione
                                </div>
                            </div>
                        </div>
                        <div class="stats-card-shine"></div>
                    </div>
                </div>
            </div>

            <!-- Main Dashboard Content -->
            <div class="row">
                <!-- Recent Scans & Performance -->
                <div class="col-lg-8">
                    <!-- Modern Recent Scans -->
                    <div class="modern-dashboard-card recent-scans-card slide-in-right">
                        <div class="card-header-modern">
                            <div class="card-header-content">
                                <div class="card-icon">
                                    <i class="bi bi-activity"></i>
                                </div>
                                <div class="card-title-section">
                                    <h5 class="card-title-modern">Scansioni Recenti</h5>
                                    <p class="card-subtitle-modern">Monitora l'attivit√† di scansione in tempo reale</p>
                                </div>
                            </div>
                            <div class="card-actions">
                                <a href="#" onclick="app.showSection('scans')" class="btn btn-modern-outline">
                                    Vedi tutte <i class="bi bi-arrow-right"></i>
                                </a>
                            </div>
                        </div>
                        <div class="card-body-modern">
                            <div id="recent-scans-list" class="scans-list-modern">
                                <!-- Populated by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <!-- Modern SEO Health Overview -->
                    <div class="modern-dashboard-card health-overview-card slide-in-right">
                        <div class="card-header-modern">
                            <div class="card-header-content">
                                <div class="card-icon health-icon">
                                    <i class="bi bi-graph-up"></i>
                                </div>
                                <div class="card-title-section">
                                    <h5 class="card-title-modern">Stato SEO <span class="title-accent">Complessivo</span></h5>
                                    <p class="card-subtitle-modern">Analisi delle performance aggregate di tutti i siti</p>
                                </div>
                            </div>
                            <div class="health-score-preview">
                                <div class="score-indicator">
                                    <span class="score-value" id="overall-score">--</span>
                                    <span class="score-label">Score</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-body-modern">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="chart-container">
                                        <canvas id="dashboardHealthChart" width="300" height="200"></canvas>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div id="health-insights" class="health-insights-modern">
                                        <!-- Populated by JavaScript -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sidebar: Quick Actions & Alerts -->
                <div class="col-lg-4">
                    <!-- Modern Quick Actions -->
                    <div class="modern-dashboard-card quick-actions-card slide-in-right">
                        <div class="card-header-modern">
                            <div class="card-header-content">
                                <div class="card-icon lightning-icon">
                                    <i class="bi bi-lightning"></i>
                                </div>
                                <div class="card-title-section">
                                    <h5 class="card-title-modern">Azioni <span class="title-accent">Rapide</span></h5>
                                    <p class="card-subtitle-modern">Operazioni frequenti a portata di click</p>
                                </div>
                            </div>
                        </div>
                        <div class="card-body-modern">
                            <div class="actions-grid">
                                <button class="action-btn client-action" onclick="app.showAddClientModal()">
                                    <div class="action-icon">
                                        <i class="bi bi-person-plus"></i>
                                    </div>
                                    <div class="action-content">
                                        <span class="action-title">Nuovo Cliente</span>
                                        <span class="action-desc">Aggiungi cliente</span>
                                    </div>
                                </button>
                                <button class="action-btn website-action" onclick="app.showAddWebsiteModal()">
                                    <div class="action-icon">
                                        <i class="bi bi-globe-europe-africa"></i>
                                    </div>
                                    <div class="action-content">
                                        <span class="action-title">Nuovo Sito</span>
                                        <span class="action-desc">Aggiungi sito web</span>
                                    </div>
                                </button>
                                <button class="action-btn scan-action" onclick="app.showNewScanModal()">
                                    <div class="action-icon">
                                        <i class="bi bi-play-circle"></i>
                                    </div>
                                    <div class="action-content">
                                        <span class="action-title">Avvia Scan</span>
                                        <span class="action-desc">Nuova scansione</span>
                                    </div>
                                </button>
                                <button class="action-btn report-action" onclick="app.viewAllReports()">
                                    <div class="action-icon">
                                        <i class="bi bi-file-earmark-text"></i>
                                    </div>
                                    <div class="action-content">
                                        <span class="action-title">Report</span>
                                        <span class="action-desc">Tutti i report</span>
                                    </div>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Modern Critical Alerts -->
                    <div class="modern-dashboard-card alerts-card slide-in-right">
                        <div class="card-header-modern danger-header">
                            <div class="card-header-content">
                                <div class="card-icon alert-icon">
                                    <i class="bi bi-exclamation-triangle"></i>
                                </div>
                                <div class="card-title-section">
                                    <h5 class="card-title-modern">Alert <span class="title-accent danger">Critici</span></h5>
                                    <p class="card-subtitle-modern">Problemi che richiedono attenzione immediata</p>
                                </div>
                            </div>
                            <div class="alert-counter">
                                <span class="counter-value" id="alert-counter">0</span>
                            </div>
                        </div>
                        <div class="card-body-modern">
                            <div id="critical-alerts" class="alerts-list-modern">
                                <!-- Populated by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <!-- Modern Activity Feed (REMOVED) -->

                </div>
            </div>
        </div>

        <!-- Clients Section -->
        <div id="clients-section" class="content-section" style="display: none;">
            <!-- Modern Clients Header -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="modern-section-header">
                        <div class="section-header-content">
                            <div class="section-icon">
                                <i class="bi bi-people"></i>
                            </div>
                            <div class="section-title-content">
                                <h1 class="section-title">Gestione <span class="title-accent">Clienti</span></h1>
                                <p class="section-subtitle">Amministra i tuoi clienti e monitora le loro performance SEO</p>
                                <div class="section-stats-mini">
                                    <span class="mini-stat">
                                        <i class="bi bi-person-check"></i> 
                                        <span id="clients-count-header">0</span> clienti attivi
                                    </span>
                                    <span class="mini-stat">
                                        <i class="bi bi-globe-europe-africa"></i> 
                                        <span id="total-websites-header">0</span> siti monitorati
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="section-actions">
                            <button class="btn btn-gradient-section" onclick="app.showAddClientModal()">
                                <i class="bi bi-person-plus"></i> Nuovo Cliente
                            </button>
                            <button class="btn btn-outline-gradient-section" onclick="app.refreshClientsData()">
                                <i class="bi bi-arrow-clockwise"></i> Aggiorna
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modern Search & Filters Card -->
            <div class="modern-filters-card slide-in-right mb-4">
                <div class="filters-card-body">
                    <div class="row align-items-center">
                        <div class="col-lg-4 mb-3 mb-lg-0">
                            <div class="search-input-container">
                                <i class="bi bi-search search-icon"></i>
                                <input type="text" class="form-control search-input" id="client-search" placeholder="Cerca clienti per nome o email...">
                            </div>
                        </div>
                        <div class="col-lg-3 mb-3 mb-lg-0">
                            <select class="form-select filter-select" id="client-filter">
                                <option value="">üìã Tutti i clienti</option>
                                <option value="active">‚úÖ Clienti attivi</option>
                                <option value="inactive">‚ùå Clienti inattivi</option>
                            </select>
                        </div>
                        <div class="col-lg-3 mb-3 mb-lg-0">
                            <select class="form-select filter-select" id="client-sort">
                                <option value="name">üî§ Ordina per nome</option>
                                <option value="created">üìÖ Pi√π recenti</option>
                                <option value="websites">üåê Per siti web</option>
                            </select>
                        </div>
                        <div class="col-lg-2">
                            <button class="btn btn-filter-clear w-100" onclick="app.clearClientsFilters()">
                                <i class="bi bi-x-circle"></i> Reset
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Modern Clients Table Card -->
            <div class="modern-table-card slide-in-right">
                <div class="table-card-header">
                    <div class="table-card-title-section">
                        <div class="table-card-icon">
                            <i class="bi bi-table"></i>
                        </div>
                        <div>
                            <h5 class="table-card-title">Elenco Clienti</h5>
                            <p class="table-card-subtitle">Gestisci tutti i tuoi clienti da un'unica interfaccia</p>
                        </div>
                    </div>
                    <div class="table-card-actions">
                        <div class="results-counter">
                            <span class="counter-label">Mostrando</span>
                            <span class="counter-value" id="clients-shown">0</span>
                            <span class="counter-label">di</span>
                            <span class="counter-value" id="clients-total">0</span>
                        </div>
                    </div>
                </div>
                <div class="table-card-body">
                    <div class="table-responsive">
                        <table class="table table-modern">
                            <thead>
                                <tr>
                                    <th class="col-name">
                                        <i class="bi bi-person"></i> Nome Cliente
                                    </th>
                                    <th class="col-email">
                                        <i class="bi bi-envelope"></i> Contatto
                                    </th>
                                    <th class="col-websites">
                                        <i class="bi bi-globe"></i> Siti Web
                                    </th>
                                    <th class="col-status">
                                        <i class="bi bi-activity"></i> Stato
                                    </th>
                                    <th class="col-updated">
                                        <i class="bi bi-clock"></i> Ultimo Aggiornamento
                                    </th>
                                    <th class="col-actions">
                                        <i class="bi bi-gear"></i> Azioni
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="clients-table-body" class="table-body-modern">
                                <!-- Populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="table-card-footer">
                    <div class="pagination-info">
                        <span class="pagination-text">Righe per pagina:</span>
                        <select class="form-select pagination-select" id="clients-per-page">
                            <option value="10">10</option>
                            <option value="25" selected>25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                    <div id="clients-pagination" class="pagination-controls">
                        <!-- Pagination buttons will be added by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Websites Section -->
        <div id="websites-section" class="content-section" style="display: none;">
            <!-- Modern Websites Header -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="modern-section-header">
                        <div class="section-header-content">
                            <div class="section-icon websites-section-icon">
                                <i class="bi bi-globe"></i>
                            </div>
                            <div class="section-title-content">
                                <h1 class="section-title">Siti <span class="title-accent">Web</span></h1>
                                <p class="section-subtitle">Monitora e gestisci tutti i siti web dei tuoi clienti</p>
                                <div class="section-stats-mini">
                                    <span class="mini-stat">
                                        <i class="bi bi-globe-europe-africa"></i> 
                                        <span id="websites-count-header">0</span> siti attivi
                                    </span>
                                    <span class="mini-stat">
                                        <i class="bi bi-activity"></i> 
                                        <span id="scanning-websites-header">0</span> in scansione
                                    </span>
                                    <span class="mini-stat">
                                        <i class="bi bi-clock"></i> 
                                        Prossima: <span id="next-scan-header">--</span>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="section-actions">
                            <button class="btn btn-gradient-section" onclick="app.showAddWebsiteModal()">
                                <i class="bi bi-plus-circle"></i> Nuovo Sito
                            </button>
                            <button class="btn btn-outline-gradient-section" onclick="app.refreshWebsitesData()">
                                <i class="bi bi-arrow-clockwise"></i> Aggiorna
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modern Search & Filters Card -->
            <div class="modern-filters-card slide-in-right mb-4">
                <div class="filters-card-body">
                    <div class="row align-items-center">
                        <div class="col-lg-4 mb-3 mb-lg-0">
                            <div class="search-input-container">
                                <i class="bi bi-search search-icon"></i>
                                <input type="text" class="form-control search-input" id="website-search" placeholder="Cerca per dominio, nome o cliente...">
                            </div>
                        </div>
                        <div class="col-lg-2 mb-3 mb-lg-0">
                            <select class="form-select filter-select" id="website-client-filter">
                                <option value="">üë• Tutti i clienti</option>
                            </select>
                        </div>
                        <div class="col-lg-2 mb-3 mb-lg-0">
                            <select class="form-select filter-select" id="website-status-filter">
                                <option value="">üìä Tutti gli stati</option>
                                <option value="active">‚úÖ Attivi</option>
                                <option value="scanning">üîÑ In scansione</option>
                                <option value="error">‚ùå Errori</option>
                            </select>
                        </div>
                        <div class="col-lg-2 mb-3 mb-lg-0">
                            <select class="form-select filter-select" id="website-frequency-filter">
                                <option value="">‚è∞ Tutte le frequenze</option>
                                <option value="daily">üåÖ Giornaliera</option>
                                <option value="weekly">üìÖ Settimanale</option>
                                <option value="monthly">üóìÔ∏è Mensile</option>
                            </select>
                        </div>
                        <div class="col-lg-2">
                            <button class="btn btn-filter-clear w-100" onclick="app.clearWebsitesFilters()">
                                <i class="bi bi-x-circle"></i> Reset
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Modern Websites Table Card -->
            <div class="modern-table-card slide-in-right">
                <div class="table-card-header">
                    <div class="table-card-title-section">
                        <div class="table-card-icon websites-card-icon">
                            <i class="bi bi-list-ul"></i>
                        </div>
                        <div>
                            <h5 class="table-card-title">Elenco Siti Web</h5>
                            <p class="table-card-subtitle">Monitora performance e stato di tutti i siti</p>
                        </div>
                    </div>
                    <div class="table-card-actions">
                        <div class="websites-quick-actions">
                            <button class="btn btn-sm btn-success me-2" onclick="app.bulkScanWebsites()">
                                <i class="bi bi-play-circle"></i> Scansiona Tutti
                            </button>
                            <div class="results-counter">
                                <span class="counter-label">Mostrando</span>
                                <span class="counter-value" id="websites-shown">0</span>
                                <span class="counter-label">di</span>
                                <span class="counter-value" id="websites-total">0</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="table-card-body">
                    <div class="table-responsive">
                        <table class="table table-modern">
                            <thead>
                                <tr>
                                    <th class="col-domain">
                                        <i class="bi bi-globe"></i> Dominio
                                    </th>
                                    <th class="col-name">
                                        <i class="bi bi-tag"></i> Nome
                                    </th>
                                    <th class="col-client">
                                        <i class="bi bi-person"></i> Cliente
                                    </th>
                                    <th class="col-frequency">
                                        <i class="bi bi-clock"></i> Frequenza
                                    </th>
                                    <th class="col-last-scan">
                                        <i class="bi bi-calendar-check"></i> Ultima Scansione
                                    </th>
                                    <th class="col-status">
                                        <i class="bi bi-activity"></i> Stato
                                    </th>
                                    <th class="col-actions">
                                        <i class="bi bi-gear"></i> Azioni
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="websites-table-body" class="table-body-modern">
                                <!-- Populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="table-card-footer">
                    <div class="pagination-info">
                        <span class="pagination-text">Righe per pagina:</span>
                        <select class="form-select pagination-select" id="websites-per-page">
                            <option value="10">10</option>
                            <option value="25" selected>25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                    <div id="websites-pagination" class="pagination-controls">
                        <!-- Pagination buttons will be added by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Scans Section -->
        <div id="scans-section" class="content-section" style="display: none;">
            <!-- Modern Scans Header -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="modern-section-header">
                        <div class="section-header-content">
                            <div class="section-icon scans-section-icon">
                                <i class="bi bi-search"></i>
                            </div>
                            <div class="section-title-content">
                                <h1 class="section-title">Monitoraggio <span class="title-accent">Scansioni</span></h1>
                                <p class="section-subtitle">Analizza i risultati SEO e monitora lo stato delle scansioni</p>
                                <div class="section-stats-mini">
                                    <span class="mini-stat">
                                        <i class="bi bi-check-circle"></i> 
                                        <span id="completed-scans-header">0</span> completate
                                    </span>
                                    <span class="mini-stat">
                                        <i class="bi bi-clock-fill"></i> 
                                        <span id="running-scans-header">0</span> in corso
                                    </span>
                                    <span class="mini-stat">
                                        <i class="bi bi-exclamation-triangle"></i> 
                                        <span id="total-issues-header">0</span> problemi rilevati
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="section-actions">
                            <button class="btn btn-gradient-section" onclick="app.showNewScanModal()">
                                <i class="bi bi-play-circle"></i> Nuova Scansione
                            </button>
                            <button class="btn btn-outline-gradient-section" onclick="app.refreshScansData()">
                                <i class="bi bi-arrow-clockwise"></i> Aggiorna
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modern Search & Filters Card -->
            <div class="modern-filters-card slide-in-right mb-4">
                <div class="filters-card-body">
                    <div class="row align-items-center">
                        <div class="col-lg-4 mb-3 mb-lg-0">
                            <div class="search-input-container">
                                <i class="bi bi-search search-icon"></i>
                                <input type="text" class="form-control search-input" id="scan-search" placeholder="Cerca per sito web o cliente...">
                            </div>
                        </div>
                        <div class="col-lg-2 mb-3 mb-lg-0">
                            <select class="form-select filter-select" id="scan-status-filter">
                                <option value="">üìä Tutti gli stati</option>
                                <option value="running">üîÑ In corso</option>
                                <option value="completed">‚úÖ Completate</option>
                                <option value="failed">‚ùå Fallite</option>
                                <option value="cancelled">‚èπÔ∏è Annullate</option>
                            </select>
                        </div>
                        <div class="col-lg-2 mb-3 mb-lg-0">
                            <select class="form-select filter-select" id="scan-date-filter">
                                <option value="">üìÖ Tutte le date</option>
                                <option value="today">üóìÔ∏è Oggi</option>
                                <option value="week">üìÜ Ultima settimana</option>
                                <option value="month">üìã Ultimo mese</option>
                            </select>
                        </div>
                        <div class="col-lg-2 mb-3 mb-lg-0">
                            <select class="form-select filter-select" id="scan-score-filter">
                                <option value="">‚≠ê Tutti i punteggi</option>
                                <option value="excellent">üü¢ Eccellente (90+)</option>
                                <option value="good">üü° Buono (70-89)</option>
                                <option value="fair">üü† Sufficiente (50-69)</option>
                                <option value="poor">üî¥ Scarso (<50)</option>
                            </select>
                        </div>
                        <div class="col-lg-2">
                            <button class="btn btn-filter-clear w-100" onclick="app.clearScansFilters()">
                                <i class="bi bi-x-circle"></i> Reset
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Modern Scans Table Card -->
            <div class="modern-table-card slide-in-right">
                <div class="table-card-header">
                    <div class="table-card-title-section">
                        <div class="table-card-icon scans-card-icon">
                            <i class="bi bi-graph-up"></i>
                        </div>
                        <div>
                            <h5 class="table-card-title">Cronologia Scansioni</h5>
                            <p class="table-card-subtitle">Visualizza e analizza tutte le scansioni SEO effettuate</p>
                        </div>
                    </div>
                    <div class="table-card-actions">
                        <div class="scans-quick-actions">
                            <button class="btn btn-sm btn-warning me-2" onclick="app.downloadAllReports()">
                                <i class="bi bi-download"></i> Scarica Tutti i Report
                            </button>
                            <div class="results-counter">
                                <span class="counter-label">Mostrando</span>
                                <span class="counter-value" id="scans-shown">0</span>
                                <span class="counter-label">di</span>
                                <span class="counter-value" id="scans-total">0</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="table-card-body">
                    <div class="table-responsive">
                        <table class="table table-modern">
                            <thead>
                                <tr>
                                    <th class="col-website">
                                        <i class="bi bi-globe"></i> Sito Web
                                    </th>
                                    <th class="col-started">
                                        <i class="bi bi-calendar-event"></i> Data Inizio
                                    </th>
                                    <th class="col-status">
                                        <i class="bi bi-activity"></i> Stato
                                    </th>
                                    <th class="col-pages">
                                        <i class="bi bi-file-earmark"></i> Pagine
                                    </th>
                                    <th class="col-issues">
                                        <i class="bi bi-exclamation-triangle"></i> Problemi
                                    </th>
                                    <th class="col-score">
                                        <i class="bi bi-speedometer2"></i> Punteggio SEO
                                    </th>
                                    <th class="col-actions">
                                        <i class="bi bi-gear"></i> Azioni
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="scans-table-body" class="table-body-modern">
                                <!-- Populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="table-card-footer">
                    <div class="pagination-info">
                        <span class="pagination-text">Righe per pagina:</span>
                        <select class="form-select pagination-select" id="scans-per-page">
                            <option value="10">10</option>
                            <option value="25" selected>25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                    <div id="scans-pagination" class="pagination-controls">
                        <!-- Pagination buttons will be added by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Scan Results Section -->
        <div id="scan-results-section" class="content-section" style="display: none;">
            <div class="row mb-3">
                <div class="col-12">
                    <div class="d-flex justify-content-between align-items-center">
                        <h2><i class="bi bi-file-text"></i> Audit SEO Report</h2>
                        <div>
                            <button class="btn btn-outline-primary me-2" onclick="app.downloadReport(app.currentScanId)">
                                <i class="bi bi-download"></i> Scarica Report PDF
                            </button>
                            <button class="btn btn-secondary" onclick="app.showSection('scans')">
                                <i class="bi bi-arrow-left"></i> Torna alle Scansioni
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Executive Summary -->
            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title"><i class="bi bi-graph-up"></i> Riepilogo Esecutivo</h5>
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="row">
                                <div class="col-sm-6 mb-3">
                                    <div class="metric-card p-3 border rounded">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <small class="text-muted">Pagine Scansionate</small>
                                                <h4 class="mb-0" id="scan-pages-count">0</h4>
                                            </div>
                                            <i class="bi bi-file-earmark text-primary fs-3"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 mb-3">
                                    <div class="metric-card p-3 border rounded">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <small class="text-muted">Problemi Totali</small>
                                                <h4 class="mb-0" id="scan-total-issues">0</h4>
                                            </div>
                                            <i class="bi bi-exclamation-triangle text-warning fs-3"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 mb-3">
                                    <div class="metric-card p-3 border rounded">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <small class="text-muted">Punteggio SEO</small>
                                                <h4 class="mb-0" id="scan-seo-score">-</h4>
                                            </div>
                                            <i class="bi bi-speedometer text-success fs-3"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 mb-3">
                                    <div class="metric-card p-3 border rounded">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <small class="text-muted">Data Scansione</small>
                                                <h6 class="mb-0" id="scan-date">-</h6>
                                            </div>
                                            <i class="bi bi-calendar text-info fs-3"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <canvas id="issuesDistributionChart" width="300" height="200"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Key Insights & Recommendations (REMOVED)-->


            <!-- Issues Breakdown by Severity -->
            <div class="accordion" id="issuesAccordion">
                <!-- Critical Issues Section -->
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#criticalIssues" aria-expanded="false">
                            <span class="badge bg-danger me-3">CRITICO</span>
                            <strong>Problemi Critici</strong>
                            <span class="badge bg-danger ms-auto" id="critical-count">0</span>
                        </button>
                    </h2>
                    <div id="criticalIssues" class="accordion-collapse collapse" data-bs-parent="#issuesAccordion">
                        <div class="accordion-body">
                            <div class="alert alert-danger">
                                <i class="bi bi-exclamation-triangle"></i>
                                <strong>Attenzione!</strong> Questi problemi richiedono un intervento immediato poich√© impattano significativamente sulla visibilit√† nei motori di ricerca.
                            </div>
                            <!-- Nested accordion for critical issue types -->
                            <div class="accordion" id="criticalSubAccordion">
                                <!-- Issue types will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- High Priority Issues Section -->
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#highIssues" aria-expanded="false">
                            <span class="badge bg-warning me-3">ALTO</span>
                            <strong>Problemi ad Alta Priorit√†</strong>
                            <span class="badge bg-warning ms-auto" id="high-count">0</span>
                        </button>
                    </h2>
                    <div id="highIssues" class="accordion-collapse collapse" data-bs-parent="#issuesAccordion">
                        <div class="accordion-body">
                            <div class="alert alert-warning">
                                <i class="bi bi-exclamation-circle"></i>
                                <strong>Importante:</strong> Questi problemi dovrebbero essere risolti per migliorare le performance SEO.
                            </div>
                            <!-- Nested accordion for high priority issue types -->
                            <div class="accordion" id="highSubAccordion">
                                <!-- Issue types will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Medium Priority Issues Section -->
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#mediumIssues" aria-expanded="false">
                            <span class="badge bg-info me-3">MEDIO</span>
                            <strong>Problemi a Media Priorit√†</strong>
                            <span class="badge bg-info ms-auto" id="medium-count">0</span>
                        </button>
                    </h2>
                    <div id="mediumIssues" class="accordion-collapse collapse" data-bs-parent="#issuesAccordion">
                        <div class="accordion-body">
                            <div class="alert alert-info">
                                <i class="bi bi-info-circle"></i>
                                <strong>Nota:</strong> Questi problemi possono essere risolti nel medio termine per ottimizzare ulteriormente il sito.
                            </div>
                            <!-- Nested accordion for medium priority issue types -->
                            <div class="accordion" id="mediumSubAccordion">
                                <!-- Issue types will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Low Priority Issues Section -->
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#lowIssues" aria-expanded="false">
                            <span class="badge bg-secondary me-3">BASSO</span>
                            <strong>Problemi a Bassa Priorit√†</strong>
                            <span class="badge bg-secondary ms-auto" id="low-count">0</span>
                        </button>
                    </h2>
                    <div id="lowIssues" class="accordion-collapse collapse" data-bs-parent="#issuesAccordion">
                        <div class="accordion-body">
                            <div class="alert alert-light">
                                <i class="bi bi-check-circle"></i>
                                <strong>Opzionale:</strong> Questi sono miglioramenti che possono essere implementati quando il tempo lo permette.
                            </div>
                            <!-- Nested accordion for low priority issue types -->
                            <div class="accordion" id="lowSubAccordion">
                                <!-- Issue types will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pages Analysis Section -->
            <div class="card mt-4">
                <div class="card-header">
                    <h5 class="mb-0"><i class="bi bi-file-earmark"></i> Analisi delle Pagine</h5>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <input type="text" class="form-control" id="page-search" placeholder="Cerca nelle pagine...">
                        </div>
                        <div class="col-md-4">
                            <select class="form-select" id="page-status-filter">
                                <option value="">Tutti gli Status</option>
                                <option value="200">200 - OK</option>
                                <option value="404">404 - Non Trovato</option>
                                <option value="500">500 - Errore Server</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <select class="form-select" id="page-issues-filter">
                                <option value="">Tutte le pagine</option>
                                <option value="has-issues">Solo con problemi</option>
                                <option value="no-issues">Solo senza problemi</option>
                            </select>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>URL</th>
                                    <th>Status</th>
                                    <th>Title</th>
                                    <th>Meta Description</th>
                                    <th>Parole</th>
                                    <th>Problemi</th>
                                </tr>
                            </thead>
                            <tbody id="pages-table-body">
                                <!-- Populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    <div id="pages-pagination" class="d-flex justify-content-center mt-3">
                        <!-- Pagination buttons will be added by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Scheduler Section -->
        <div id="scheduler-section" class="content-section" style="display: none;">
            <!-- Professional Scheduler Header -->
            <div class="row mb-3">
                <div class="col-12">
                    <div class="scheduler-header-professional">
                        <div class="header-left">
                            <div class="header-icon-modern">
                                <i class="bi bi-clock-history"></i>
                            </div>
                            <div class="header-content">
                                <h2 class="scheduler-title">Scheduler <span class="accent-text">Management</span></h2>
                                <div class="scheduler-status-bar">
                                    <span class="status-indicator" id="scheduler-status">
                                        <i class="bi bi-circle-fill text-success"></i> Sistema Operativo
                                    </span>
                                    <span class="separator">‚Ä¢</span>
                                    <span class="live-stats">
                                        <i class="bi bi-calendar-check"></i> <span id="scheduled-count-header">0</span> programmate
                                    </span>
                                    <span class="separator">‚Ä¢</span>
                                    <span class="live-stats">
                                        <i class="bi bi-cpu"></i> <span id="workers-count-header">0</span> workers
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="header-actions-compact">
                            <button class="btn btn-pro-primary" onclick="scheduler.showScheduleModal()">
                                <i class="bi bi-plus-lg"></i> Nuova
                            </button>
                            <button class="btn btn-pro-secondary" onclick="scheduler.refreshData()" id="scheduler-refresh">
                                <i class="bi bi-arrow-clockwise"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Compact Professional Stats -->
            <div class="row mb-3">
                <div class="col-lg-3 col-md-6 mb-2">
                    <div class="stat-card-pro">
                        <div class="stat-icon stat-icon-workers">
                            <i class="bi bi-cpu"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Workers</div>
                            <div class="stat-value" id="active-workers">0</div>
                        </div>
                        <div class="stat-status" id="worker-status-indicator">
                            <i class="bi bi-circle-fill text-success"></i>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-2">
                    <div class="stat-card-pro">
                        <div class="stat-icon stat-icon-queue">
                            <i class="bi bi-list-task"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Queue</div>
                            <div class="stat-value" id="queue-size">0</div>
                        </div>
                        <div class="stat-trend" id="queue-trend">
                            <i class="bi bi-dash"></i>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-2">
                    <div class="stat-card-pro">
                        <div class="stat-icon stat-icon-completed">
                            <i class="bi bi-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Oggi</div>
                            <div class="stat-value" id="processed-today">0</div>
                        </div>
                        <div class="stat-trend positive">
                            <i class="bi bi-arrow-up"></i>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-2">
                    <div class="stat-card-pro">
                        <div class="stat-icon stat-icon-scheduled">
                            <i class="bi bi-calendar-check"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Programmate</div>
                            <div class="stat-value" id="scheduled-scans-count">0</div>
                        </div>
                        <div class="stat-trend">
                            <i class="bi bi-calendar"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Content Row -->
            <div class="row">
                <!-- Scheduled Scans -->
                <div class="col-lg-8">
                    <div class="card mb-4">
                        <div class="card-header-pro">
                            <div class="card-header-left">
                                <h5 class="card-title-pro">
                                    <i class="bi bi-calendar-event"></i> Scansioni Programmate
                                </h5>
                            </div>
                            <div class="card-header-actions">
                                <button class="btn btn-pro-outline-warning btn-sm" onclick="scheduler.showBulkScheduleModal()">
                                    <i class="bi bi-lightning"></i> Bulk
                                </button>
                                <button class="btn btn-pro-primary btn-sm" onclick="scheduler.showScheduleModal()">
                                    <i class="bi bi-plus"></i> Nuova
                                </button>
                            </div>
                        </div>
                        <div class="filters-bar-pro">
                            <div class="filter-group">
                                <input type="text" class="filter-input-pro" id="schedule-search" placeholder="Cerca sito web...">
                            </div>
                            <div class="filter-group">
                                <select class="filter-select-pro" id="schedule-status-filter">
                                    <option value="">Tutti</option>
                                    <option value="active">Attivi</option>
                                    <option value="inactive">Inattivi</option>
                                    <option value="error">Errori</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <select class="filter-select-pro" id="schedule-frequency-filter">
                                    <option value="">Frequenza</option>
                                    <option value="hourly">Oraria</option>
                                    <option value="daily">Giornaliera</option>
                                    <option value="weekly">Settimanale</option>
                                    <option value="monthly">Mensile</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <button class="btn-filter-reset" onclick="scheduler.clearFilters()">
                                    <i class="bi bi-x"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Sito Web</th>
                                            <th>Frequenza</th>
                                            <th>Ultima Scansione</th>
                                            <th>Prossima Scansione</th>
                                            <th>Stato</th>
                                            <th>Azioni</th>
                                        </tr>
                                    </thead>
                                    <tbody id="scheduled-scans-table-body">
                                        <!-- Populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Active Tasks -->
                    <div class="card">
                        <div class="card-header bg-transparent">
                            <h5 class="mb-0"><i class="bi bi-activity"></i> Task Attivi</h5>
                        </div>
                        <div class="card-body">
                            <div id="active-tasks-list">
                                <!-- Populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sidebar: Controls & Stats -->
                <div class="col-lg-4">
                    <!-- Queue Controls -->
                    <div class="card mb-4">
                        <div class="card-header bg-transparent">
                            <h5 class="mb-0"><i class="bi bi-gear"></i> Controlli Queue</h5>
                        </div>
                        <div class="card-body">
                            <div class="d-grid gap-2">
                                <button class="btn btn-outline-success" onclick="app.purgeQueue()">
                                    <i class="bi bi-trash"></i> Pulisci Queue
                                </button>
                                <button class="btn btn-outline-warning" onclick="app.pauseScheduler()">
                                    <i class="bi bi-pause-circle"></i> Pausa Scheduler
                                </button>
                                <button class="btn btn-outline-info" onclick="app.resumeScheduler()">
                                    <i class="bi bi-play-circle"></i> Riprendi Scheduler
                                </button>
                                <hr class="my-3">
                                <button class="btn btn-outline-primary" onclick="app.showWorkerStats()">
                                    <i class="bi bi-graph-up"></i> Statistiche Worker
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Tasks Log -->
                    <div class="card">
                        <div class="card-header bg-transparent">
                            <h5 class="mb-0"><i class="bi bi-list-ul"></i> Log Task Recenti</h5>
                        </div>
                        <div class="card-body">
                            <div id="recent-tasks-log" style="max-height: 400px; overflow-y: auto;">
                                <!-- Populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Schedule Scan Modal -->
    <div class="modal fade" id="scheduleModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Nuova Programmazione Scansione</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="scheduleForm">
                        <div class="mb-3">
                            <label for="scheduleWebsite" class="form-label">Sito Web *</label>
                            <select class="form-select" id="scheduleWebsite" required>
                                <option value="">Seleziona sito web...</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="scheduleFrequency" class="form-label">Frequenza Scansione *</label>
                            <select class="form-select" id="scheduleFrequency" required>
                                <option value="daily">Giornaliera</option>
                                <option value="weekly">Settimanale</option>
                                <option value="monthly" selected>Mensile</option>
                            </select>
                            <div class="form-text">La frequenza determina quanto spesso il sito verr√† scansionato automaticamente.</div>
                        </div>
                        <div class="mb-3">
                            <label for="scheduleMaxPages" class="form-label">Massimo Pagine da Scansionare</label>
                            <input type="number" class="form-control" id="scheduleMaxPages" value="1000" min="1" max="10000">
                            <div class="form-text">Limite massimo di pagine da analizzare per scansione.</div>
                        </div>
                        <div class="mb-3">
                            <label for="scheduleMaxDepth" class="form-label">Profondit√† Massima</label>
                            <input type="number" class="form-control" id="scheduleMaxDepth" value="5" min="1" max="10">
                            <div class="form-text">Livelli di navigazione massimi da seguire.</div>
                        </div>
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="scheduleRobotsRespect" checked>
                            <label class="form-check-label" for="scheduleRobotsRespect">
                                Rispetta robots.txt
                            </label>
                            <div class="form-text">Se attivato, la scansione rispetter√† le direttive del file robots.txt.</div>
                        </div>
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="scheduleIncludeExternal">
                            <label class="form-check-label" for="scheduleIncludeExternal">
                                Includi link esterni
                            </label>
                            <div class="form-text">Se attivato, verranno analizzati anche i link verso siti esterni.</div>
                        </div>
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="scheduleStartNow">
                            <label class="form-check-label" for="scheduleStartNow">
                                Avvia prima scansione immediatamente
                            </label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annulla</button>
                    <button type="button" class="btn btn-primary" onclick="scheduler.createSchedule()">
                        <i class="bi bi-check-circle"></i> Crea Programmazione
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bulk Schedule Modal -->
    <div class="modal fade" id="bulkScheduleModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Programmazione Bulk</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i>
                        <strong>Programmazione di massa:</strong> Questa funzione creer√† automaticamente programmazioni per tutti i siti web attivi che non ne hanno ancora una.
                    </div>
                    <form id="bulkScheduleForm">
                        <div class="mb-3">
                            <label for="bulkFrequency" class="form-label">Frequenza per Tutti i Siti *</label>
                            <select class="form-select" id="bulkFrequency" required>
                                <option value="hourly">üïê Oraria</option>
                                <option value="daily">üåÖ Giornaliera</option>
                                <option value="weekly" selected>üìÖ Settimanale</option>
                                <option value="monthly">üóìÔ∏è Mensile</option>
                            </select>
                        </div>
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="bulkOnlyUnscheduled" checked>
                            <label class="form-check-label" for="bulkOnlyUnscheduled">
                                Solo siti senza programmazione esistente
                            </label>
                            <div class="form-text">Se attivato, verr√† saltato chi ha gi√† una programmazione attiva.</div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annulla</button>
                    <button type="button" class="btn btn-warning" onclick="scheduler.createBulkSchedules()">
                        <i class="bi bi-lightning"></i> Avvia Programmazione Bulk
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Schedule Modal -->
    <div class="modal fade" id="editScheduleModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Modifica Programmazione Scansione</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="editScheduleForm">
                        <input type="hidden" id="editWebsiteId">
                        <div class="mb-3">
                            <label class="form-label">Sito Web</label>
                            <input type="text" class="form-control" id="editWebsiteDomain" readonly>
                        </div>
                        <div class="mb-3">
                            <label for="editScheduleFrequency" class="form-label">Frequenza Scansione *</label>
                            <select class="form-select" id="editScheduleFrequency" required>
                                <option value="daily">Giornaliera</option>
                                <option value="weekly">Settimanale</option>
                                <option value="monthly">Mensile</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="editScheduleMaxPages" class="form-label">Massimo Pagine da Scansionare</label>
                            <input type="number" class="form-control" id="editScheduleMaxPages" min="1" max="10000">
                        </div>
                        <div class="mb-3">
                            <label for="editScheduleMaxDepth" class="form-label">Profondit√† Massima</label>
                            <input type="number" class="form-control" id="editScheduleMaxDepth" min="1" max="10">
                        </div>
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="editScheduleRobotsRespect">
                            <label class="form-check-label" for="editScheduleRobotsRespect">
                                Rispetta robots.txt
                            </label>
                        </div>
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="editScheduleIncludeExternal">
                            <label class="form-check-label" for="editScheduleIncludeExternal">
                                Includi link esterni
                            </label>
                        </div>
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="editScheduleActive">
                            <label class="form-check-label" for="editScheduleActive">
                                Programmazione attiva
                            </label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-danger" onclick="scheduler.deleteScheduleFromModal()">
                        <i class="bi bi-trash"></i> Elimina Programmazione
                    </button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annulla</button>
                    <button type="button" class="btn btn-primary" onclick="scheduler.updateSchedule()">
                        <i class="bi bi-check-circle"></i> Salva Modifiche
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Add Client Modal -->
    <div class="modal fade" id="addClientModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Aggiungi Nuovo Cliente</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addClientForm">
                        <div class="mb-3">
                            <label for="clientName" class="form-label">Nome Cliente</label>
                            <input type="text" class="form-control" id="clientName" required>
                        </div>
                        <div class="mb-3">
                            <label for="clientEmail" class="form-label">Email</label>
                            <input type="email" class="form-control" id="clientEmail">
                        </div>
                        <div class="mb-3">
                            <label for="clientDescription" class="form-label">Descrizione</label>
                            <textarea class="form-control" id="clientDescription" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annulla</button>
                    <button type="button" class="btn btn-primary" onclick="clients.addClient()">Salva Cliente</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Website Modal -->
    <div class="modal fade" id="addWebsiteModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Aggiungi Nuovo Sito Web</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addWebsiteForm">
                        <div class="mb-3">
                            <label for="websiteDomain" class="form-label">Dominio</label>
                            <input type="url" class="form-control" id="websiteDomain" placeholder="https://example.com" required>
                        </div>
                        <div class="mb-3">
                            <label for="websiteName" class="form-label">Nome Sito</label>
                            <input type="text" class="form-control" id="websiteName">
                        </div>
                        <div class="mb-3">
                            <label for="websiteClient" class="form-label">Cliente</label>
                            <select class="form-select" id="websiteClient" required>
                                <option value="">Seleziona cliente...</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="websiteDescription" class="form-label">Descrizione</label>
                            <textarea class="form-control" id="websiteDescription" rows="2"></textarea>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <label for="scanFrequency" class="form-label">Frequenza Scansione</label>
                                <select class="form-select" id="scanFrequency">
                                    <option value="daily">Giornaliera</option>
                                    <option value="weekly">Settimanale</option>
                                    <option value="monthly" selected>Mensile</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="maxPages" class="form-label">Max Pagine</label>
                                <input type="number" class="form-control" id="maxPages" value="1000">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annulla</button>
                    <button type="button" class="btn btn-primary" onclick="websites.addWebsite()">Salva Sito Web</button>
                </div>
            </div>
        </div>
    </div>

    <!-- New Scan Modal -->
    <div class="modal fade" id="newScanModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Avvia Nuova Scansione</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="newScanForm">
                        <div class="mb-3">
                            <label for="scanWebsite" class="form-label">Sito Web da Scansionare *</label>
                            <select class="form-select" id="scanWebsite" required>
                                <option value="">Seleziona sito web...</option>
                            </select>
                            <div class="form-text">Verranno scansionate solo i siti web attivi.</div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annulla</button>
                    <button type="button" class="btn btn-warning" onclick="scans.startNewScan()">
                        <i class="bi bi-play-circle"></i> Avvia Scansione
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Core Modules -->
    <script src="/static/js/core/utils.js"></script>
    <script src="/static/js/core/api-client.js"></script>
    <script src="/static/js/core/app-state.js"></script>
    
    <!-- Feature Modules -->
    <script src="/static/js/modules/dashboard.js"></script>
    <script src="/static/js/modules/clients.js"></script>
    <script src="/static/js/modules/websites.js"></script>
    <script src="/static/js/modules/scans.js"></script>
    <script src="/static/js/modules/scan-results.js"></script>
    <script src="/static/js/modules/scheduler.js"></script>
    
    <!-- Main Application -->
    <script src="/static/js/app.js"></script>
</body>
</html>